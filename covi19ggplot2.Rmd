---
title: "covi19 ggplot2"
author: "Norberto Asensio"
date: "24/03/2020"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Get COVI19 world data

Script detail to download data in <https://www.ecdc.europa.eu/sites/default/files/documents/COVID-19-geographic-disbtribution-worldwide->.

```{r}
#these libraries are necessary
library(readxl)
library(httr)
#create the URL where the dataset is stored with automatic updates every day
url <- paste("https://www.ecdc.europa.eu/sites/default/files/documents/COVID-19-geographic-disbtribution-worldwide-",format(Sys.time(), "%Y-%m-%d"), ".xlsx", sep = "")
#download the dataset from the website to a local temporary file
GET(url, authenticate(":", ":", type="ntlm"), write_disk(tf <- tempfile(fileext = ".xlsx")))
#read the Dataset sheet into “R”
data <- read_excel(tf)
#read the Dataset sheet into “R”
data <- read_excel(tf)
str(data)
```

## Subsample a database with countries of interest
```{r}
severaldata <- data[which(data$`Countries and territories`=='Spain' | 
                            data$`Countries and territories`=='Italy'| 
                            data$`Countries and territories`=='Mexico'| 
                            data$`Countries and territories`=='Thailand'| 
                            data$`Countries and territories`=='United_Kingdom'), ]
table(severaldata$`Countries and territories`)#available days with data
```

## Scatterplots with daily new cases

```{r}
library(ggplot2)
ggplot(severaldata, aes(x=DateRep, y=Cases, color=`Countries and territories`)) +
  geom_point()+geom_line()+  
  xlab("Date") + ylab("COVI19 new cases") +
  theme(plot.title = element_text(lineheight=.8, face="bold", size = 20)) +theme(text = element_text(size=12))
```


